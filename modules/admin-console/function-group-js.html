<script>
	$("#navigation").html(param("group"));
	$("#nav-search").empty();
	$("#nav-search").append("周期 = <select id=\"period\" style=\"width:200px;\"><option value=\"1\">MINUTE</option><option value=\"0\">HOUR</option><option value=\"0\">DAY</option></select> 排序字段 = <select id=\"sortBy\" style=\"width:200px;\"><option value=\"TOTAL\">Total</option><option value=\"EXCEPTION\">Error</option><option value=\"TIMEOUT\">Timeout</option><option value=\"RTT\">Elapse</option></select>");
	var template = "<tr id=\"#{id}\"><td>#{service}</td><td>#{versionAndCatalog}</td><td>#{method}</td><td>#{total}</td><td>#{error}</td><td>#{timeout}</td><td>#{elapse}</td></tr>";
	function methods() {
		jQuery.ajax({
			type : "GET",
			url : "/api/methods/group?group=" + param("group") + "&period=" +  $("#period").find('option:selected').text() + "&offset=" + $("#period").val() + "&sortBy=" + $("#sortBy").val(),
			success : function callback(data) {
				$("#service-tab_tbody").empty();
				$(data).each(function(index, element){
					$("#service-tab_tbody").append(template.replace("#{id}", index).replace("#{service}", element.service).replace("#{versionAndCatalog}", element.version).replace("#{method}", element.name).replace("#{total}", element.total).replace("#{error}", element.exception).replace("#{timeout}", element.timeout).replace("#{elapse}", element.rtt));
					$("#" + index).click(function(){
						window.open("?function=function-chart&service=" + element.service + "&versionAndCatalog=" + element.version);
					})
				});
			}
		});
	}
	
	$("#period").change(function() {
		methods();
	});
	
	$("#sortBy").change(function() {
		methods();
	});
	
	$(document).ready(function() {
		methods();
	});
</script>